{"version":3,"sources":["../../node_modules/browser-pack/_prelude.js","index.js","../src/gutenberg-blocks/UpvotyBlock.js","../src/gutenberg-blocks/index.js","../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/inherits.js","../../node_modules/@babel/runtime/helpers/interopRequireDefault.js","../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/typeof.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_interopRequireDefault","Object","defineProperty","value","default","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","wp","window","InspectorControls","blockEditor","_wp$components","components","PanelBody","Panel","PanelRow","TextControl","SelectControl","CheckboxControl","RadioControl","ToggleControl","FormToggle","Component","element","ServerSideRender","i18n","__","serverSideRender","EmptyLoopBlock","createElement","className","_default","_Component","UpvotyBlock","_super","_this","_len","args","Array","_key","concat","UpvotyWp","console","log","create","unsubscribe","check","$widget","el","querySelector","timer","setInterval","clearInterval","document","remove","createWidget","specific_board","val","props","setAttributes","board_hash","start_page","recreateWidget","attributes","key","getElementById","style","visibility","_this2","_this$props","ref","block","EmptyResponsePlaceholder","LoadingResponsePlaceholder","title","initialOpen","label","UGBLocalized","specific_board_label","help","specific_board_help","checked","onChange","onChangeSpecificBoard","id","board_hash_label","board_hash_help","onChangeBoardHash","start_page_label","start_page_help","options","onChangeStartPage","@babel/runtime/helpers/assertThisInitialized","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/getPrototypeOf","@babel/runtime/helpers/inherits","@babel/runtime/helpers/interopRequireDefault","@babel/runtime/helpers/possibleConstructorReturn","2","_UpvotyBlock","registerBlockType","blocks","description","icon","xmlns","viewBox","x","fill","width","height","d","category","keywords","edit","save","./UpvotyBlock","3","self","ReferenceError","__esModule","4","instance","Constructor","TypeError","5","_defineProperties","target","descriptor","enumerable","configurable","writable","protoProps","staticProps","6","obj","7","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","8","subClass","superClass","./setPrototypeOf.js","9","10","_typeof","assertThisInitialized","./assertThisInitialized.js","@babel/runtime/helpers/typeof","11","_setPrototypeOf","12","Symbol","iterator"],"mappings":"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","file":"gutenberg-blocks.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import UpvotyBlock from './UpvotyBlock'\r\n\r\nconst { wp } = window\r\n\r\nconst {\r\n  blocks: {\r\n    registerBlockType\r\n  },\r\n  i18n: { __ },\r\n} = wp\r\n\r\n/**\r\n * Register Gutenberg block\r\n *\r\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-registration\r\n *\r\n * @param  {string}   name     Block name\r\n * @param  {Object}   settings Block settings\r\n * @return {?WPBlock}          The block, if it has been successfully\r\n *                             registered; otherwise `undefined`\r\n */\r\n\r\nregisterBlockType( 'tangible/upvoty', {\r\n  title: __( 'Upvoty' ),\r\n  description: __( 'Embed Upvoty feedback widget' ),\r\n\r\n  /**\r\n   * Icon\r\n   *\r\n   * @see https://developer.wordpress.org/block-editor/developers/block-api/block-registration/#icon-optional\r\n   * @see https://developer.wordpress.org/resource/dashicons/\r\n   */\r\n\r\n  // Based on dashicon-image-rotate - TODO: Create SVG from logo\r\n  icon:\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><rect x=\"0\" fill=\"none\" width=\"20\" height=\"20\"/><g><path d=\"M10.25 1.02c5.1 0 8.75 4.04 8.75 9s-3.65 9-8.75 9c-3.2 0-6.02-1.59-7.68-3.99l2.59-1.52c1.1 1.5 2.86 2.51 4.84 2.51 3.3 0 6-2.79 6-6s-2.7-6-6-6c-1.97 0-3.72 1-4.82 2.49L7 8.02l-6 2v-7L2.89 4.6c1.69-2.17 4.36-3.58 7.36-3.58z\"/></g></svg>\r\n  ,\r\n\r\n  /**\r\n   * Category\r\n   *\r\n   * Core categories are common, formatting, layout, widgets, embed\r\n   *\r\n   * @see https://developer.wordpress.org/block-editor/designers-developers/developers/filters/block-filters/#managing-block-categories\r\n   */\r\n  category: 'embed',\r\n  keywords: [\r\n    __( 'upvoty' ),\r\n  ],\r\n\r\n  edit(props) {\r\n    return <UpvotyBlock {...props} />\r\n  },\r\n\r\n  save() {\r\n    // Dynamic block\r\n    return null\r\n  }\r\n})\r\n","\nconst { wp } = window\n\nconst {\n  blockEditor: {\n    InspectorControls\n  },\n  components: {\n    Panel,\n    PanelBody,\n    PanelRow,\n    TextControl,\n    CheckboxControl,\n    RadioControl,\n    SelectControl,\n    FormToggle,\n    ToggleControl\n  },\n  element: {\n    Component\n  },\n  i18n: { __ },\n  serverSideRender: ServerSideRender\n} = wp\n\nconst EmptyLoopBlock = () => <div className=\"tangible-upvoty-block\">&nbsp;</div>\n\nclass UpvotyBlock extends Component {\n\n  componentDidMount() {\n    this.createWidget()\n  }\n\n  componentDidUnmount() {\n    if (this.unsubscribe) this.unsubscribe()\n  }\n\n  componentDidUpdate() {\n    const hidden_panels = document.getElementById(\"hidden-specific-board-panels\")\n    if(hidden_panels) {\n      if(this.props.attributes.specific_board) {\n        document.getElementById(\"hidden-specific-board-panels\").style.visibility='visible'\n      } else{\n        document.getElementById(\"hidden-specific-board-panels\").style.visibility='hidden'\n      }\n    }\n  }\n\n  createWidget = () => {\n\n    const { UpvotyWp } = window\n\n    console.log('UpvotyWp1111 - ',UpvotyWp)\n\n    if (!UpvotyWp || !UpvotyWp.create) return\n\n    /**\n     * The workaround below is due to <ServerSideRender> not having a hook\n     * when content is fetched and rendered.\n     *\n     * @see https://github.com/WordPress/gutenberg/tree/master/packages/server-side-render\n     *\n     * We check at regular intervals until the element (with data attribute) is ready.\n     */\n\n    if (this.unsubscribe) this.unsubscribe()\n\n    const check = () => {\n\n      const $widget = this.el.querySelector('[data-upvoty]')\n      if (!$widget) return\n\n      UpvotyWp.create({\n        element: $widget\n      })\n\n      this.unsubscribe()\n    }\n\n    const timer = setInterval(check, 1000)\n\n    this.unsubscribe = () => {\n      clearInterval(timer)\n      this.unsubscribe = null\n    }\n\n    check()\n  }\n\n  recreateWidget = () => {\n\n    const recreate = () => {\n    const $widget = document.querySelector('[data-upvoty]')\n    if ($widget) $widget.remove()\n      this.createWidget()\n    }\n\n    recreate()\n  }\n\n  onChangeSpecificBoard = ( specific_board ) => {\n\n    if(specific_board.val){\n      this.props.setAttributes( { specific_board: 'yes' } )\n    } else{\n      this.props.setAttributes( { specific_board: '' } )\n      this.props.setAttributes( { board_hash: '' } )\n      this.props.setAttributes( {  start_page: '' } )\n    }\n\n    this.recreateWidget()\n   }\n\n  onChangeBoardHash = ( board_hash ) => {\n\n     if(this.props.attributes.specific_board) {\n       this.props.setAttributes( { board_hash: board_hash.val } )\n     }\n\n     this.recreateWidget()\n  }\n\n  onChangeStartPage = ( start_page ) => {\n\n    if(this.props.attributes.specific_board) {\n      this.props.setAttributes({start_page: start_page.val})\n    }\n\n     this.recreateWidget()\n  }\n\n  render() {\n\n    const {\n      className,\n      attributes\n    } = this.props\n\n    const {\n      specific_board,\n      board_hash,\n      start_page\n    } = attributes;\n\n    return (\n      <div ref={el => this.el = el}>\n        <ServerSideRender\n          block=\"tangible/upvoty\"\n          className={ className }\n          attributes={ attributes }\n          EmptyResponsePlaceholder={ EmptyLoopBlock }\n          LoadingResponsePlaceholder={ EmptyLoopBlock }\n        />\n        { <InspectorControls>\n          <PanelBody\n            title=\"Settings\"\n            initialOpen={ true }\n          >\n            <PanelRow>\n              <ToggleControl\n                label={UGBLocalized.specific_board_label}\n                help={UGBLocalized.specific_board_help}\n                checked={specific_board}\n                onChange={( val ) => this.onChangeSpecificBoard({ val })}\n              />\n            </PanelRow>\n            <div id=\"hidden-specific-board-panels\">\n            <PanelRow>\n              <TextControl\n                label={UGBLocalized.board_hash_label}\n                help={UGBLocalized.board_hash_help}\n                value={ board_hash }\n                onChange={ ( val ) => this.onChangeBoardHash( { val } ) }\n              />\n            </PanelRow>\n            <PanelRow>\n              <SelectControl\n                label={UGBLocalized.start_page_label}\n                help={UGBLocalized.start_page_help}\n                options = {[\n                      { label: 'Roadmap Start Page', value: 'roadmap' },\n                      { label: 'Default Board Page', value: '' },\n                  ]}\n                onChange={ ( val ) => this.onChangeStartPage( { val } ) }\n                value={ start_page }\n              />\n            </PanelRow>\n            </div>\n          </PanelBody>\n        </InspectorControls> }\n      </div>\n    )\n  }\n}\n\nexport default UpvotyBlock\n","import UpvotyBlock from './UpvotyBlock'\r\n\r\nconst { wp } = window\r\n\r\nconst {\r\n  blocks: {\r\n    registerBlockType\r\n  },\r\n  i18n: { __ },\r\n} = wp\r\n\r\n/**\r\n * Register Gutenberg block\r\n *\r\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-registration\r\n *\r\n * @param  {string}   name     Block name\r\n * @param  {Object}   settings Block settings\r\n * @return {?WPBlock}          The block, if it has been successfully\r\n *                             registered; otherwise `undefined`\r\n */\r\n\r\nregisterBlockType( 'tangible/upvoty', {\r\n  title: __( 'Upvoty' ),\r\n  description: __( 'Embed Upvoty feedback widget' ),\r\n\r\n  /**\r\n   * Icon\r\n   *\r\n   * @see https://developer.wordpress.org/block-editor/developers/block-api/block-registration/#icon-optional\r\n   * @see https://developer.wordpress.org/resource/dashicons/\r\n   */\r\n\r\n  // Based on dashicon-image-rotate - TODO: Create SVG from logo\r\n  icon:\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><rect x=\"0\" fill=\"none\" width=\"20\" height=\"20\"/><g><path d=\"M10.25 1.02c5.1 0 8.75 4.04 8.75 9s-3.65 9-8.75 9c-3.2 0-6.02-1.59-7.68-3.99l2.59-1.52c1.1 1.5 2.86 2.51 4.84 2.51 3.3 0 6-2.79 6-6s-2.7-6-6-6c-1.97 0-3.72 1-4.82 2.49L7 8.02l-6 2v-7L2.89 4.6c1.69-2.17 4.36-3.58 7.36-3.58z\"/></g></svg>\r\n  ,\r\n\r\n  /**\r\n   * Category\r\n   *\r\n   * Core categories are common, formatting, layout, widgets, embed\r\n   *\r\n   * @see https://developer.wordpress.org/block-editor/designers-developers/developers/filters/block-filters/#managing-block-categories\r\n   */\r\n  category: 'embed',\r\n  keywords: [\r\n    __( 'upvoty' ),\r\n  ],\r\n\r\n  edit(props) {\r\n    return <UpvotyBlock {...props} />\r\n  },\r\n\r\n  save() {\r\n    // Dynamic block\r\n    return null\r\n  }\r\n})\r\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;"]}